import{C as e,D as t}from"./index.06ab4907.js";import{o as l,c as a,a as o,d as s,e as d,v as u,f as n,F as r,g as i,b as h}from"./vendor.7f2c6655.js";const c={props:{cid:{required:!1}},data:()=>({allData:[],prices:[],amountMeter:[],due:0,dues:[],singleCustomer:!1,customerId:"",fromDate:"",toDate:"",customer:{name:"",address:"",phone:""},dueColVis:!1,rateColVis:!1,actionColVis:!1,totalDueOfCus:0}),methods:{getAllCustomerData(){this.customerId="",this.dueColVis=!1,this.getAllFilteredData()},getTodayData(){this.fromDate=this.decodeDate(this.dateToday()),this.toDate=this.decodeDate(this.dateToday()),this.dueColVis=!1,this.getAllFilteredData()},getAllTimeData(){this.fromDate="01-01-1901",this.toDate="31-12-2099",this.dueColVis=!0,this.getAllFilteredData()},getCustomer(t){e.get(t).then((e=>{this.customer=e.data,console.log(e.data)})).catch((e=>{console.log(e)}))},getAllData(){this.prices=[],this.amountMeter=[],t.getAll().then((e=>{this.allData=e.data,console.log(e.data);for(let t=0;t<this.allData.length;++t)this.prices.push((this.allData[t].d_amount*this.allData[t].d_rate).toFixed(2)),this.allData[t].d_date=this.decodeDate(this.allData[t].d_date),console.log("Encoded: "+this.encodeDate(this.allData[t].d_date)),this.amountMeter[t]=(this.allData[t].d_amount/1.094).toFixed(2)})).catch((e=>{console.log(e)}))},getAllFilteredData(){this.prices=[],this.amountMeter=[],this.due=0,this.dues=[],""==this.customerId?(this.customerId=0,this.singleCustomer=!1):(this.singleCustomer=!0,this.dueColVis=!0,this.getCustomer(this.customerId)),""==this.fromDate&&(this.fromDate="01-01-1901"),""==this.toDate&&(this.toDate="31-12-2099"),t.getByCustomerDate(this.customerId,this.encodeDate(this.fromDate),this.encodeDate(this.toDate)).then((e=>{this.allData=e.data,console.log(e.data);for(let t=0;t<this.allData.length;++t)this.prices.push((this.allData[t].d_amount*this.allData[t].d_rate).toFixed(2)),this.allData[t].d_date=this.decodeDate(this.allData[t].d_date),"0"==this.allData[t].d_type?this.due+=parseFloat(this.prices[t]):this.due-=parseFloat(this.prices[t]),this.dues.push(this.due.toFixed(2)),this.amountMeter[t]=(this.allData[t].d_amount/1.094).toFixed(2);this.getDue(this.customerId)})).catch((e=>{console.log(e)}))},isPurchase(e){if(!e)return!0},isIntegerNumber:function(e){var t=(e=e||window.event).which?e.which:e.keyCode;if(!(t>31&&(t<48||t>57)))return!0;e.preventDefault()},decodeDate(e){var t=(e=e.toString()).charAt(0)+e.charAt(1)+e.charAt(2)+e.charAt(3),l=e.charAt(4)+e.charAt(5);return e.charAt(6)+e.charAt(7)+"-"+l+"-"+t},encodeDate:e=>(e=e.toString()).charAt(6)+e.charAt(7)+e.charAt(8)+e.charAt(9)+""+(e.charAt(3)+e.charAt(4))+(e.charAt(0)+e.charAt(1)),dateToday(){var e=new Date,t=e.getDate(),l=e.getMonth()+1;return t<10&&(t="0"+t),l<10&&(l="0"+l),e.getFullYear()+""+l+t},getDue(e){this.singleCustomer||(this.dueColVis=!1);let l=null;t.getByCustomer(e).then((e=>{l=e.data,console.log(l),this.totalDueOfCus=0;for(let t=0;t<l.length;++t)"0"==l[t].d_type?this.totalDueOfCus+=parseFloat(parseFloat(l[t].d_rate)*parseFloat(l[t].d_amount)):this.totalDueOfCus-=parseFloat(parseFloat(l[t].d_rate)*parseFloat(l[t].d_amount));this.totalDueOfCus=this.totalDueOfCus.toFixed(1),console.log("Due Total : ",this.totalDueOfCus)})).catch((e=>{console.log(e)}))},deleteData(e){confirm("Are you sure want to delete this data?")&&t.delete(e).then((e=>{console.log(e.data),alert("Selected data deleted successfully"),this.getAllFilteredData()})).catch((e=>{alert("Delete error"),console.log(e)}))}},created(){this.cid&&(this.customerId=this.cid,this.dueColVis=!0,this.getAllFilteredData(),this.getDue(this.customerId))},mounted(){this.cid||(this.dueColVis=!0,this.getAllData(),this.getDue(this.customerId))}},m=o("p",null,"Data View",-1),p=h("  "),D=h("  "),g={class:"float-right pr-10"},C={class:"float-left"},y=o("label",{for:"dueColCheckbox"}," Due",-1),b=o("br",null,null,-1),V={class:"float-left"},f=o("label",{for:"rateColCheckbox"}," Rate",-1),A=o("br",null,null,-1),x={class:"float-left"},k=o("label",{for:"actionColCheckbox"}," Actions",-1),_=o("hr",null,null,-1),U=h("  "),v=h("  "),F=o("br",null,null,-1),w={key:0},I={key:1},T=h(" | "),M=o("label",{for:"customerName"},"Customer Name : ",-1),N=h("| "),O=o("label",{for:"customerAddress"},"Customer Address : ",-1),P=h("| "),E=o("label",{for:"customerPhone"},"Customer Phone : ",-1),S=h("| "),j=o("br",null,null,-1),B=o("br",null,null,-1),R=o("label",{for:"totalDue"},"Total Due : ",-1),Y=h("  "),q={key:2},K={key:3},$={class:"mx-auto bg-green-300",border:"1"},z={key:0},G=o("th",null,"Date",-1),H=o("th",null,"Type",-1),J=o("th",null,"Item Name",-1),L=o("th",null,"Amount(Meter)",-1),Q=o("th",null,"Amount(Yard)",-1),W={key:1},X=o("th",null,"Price",-1),Z={key:2},ee={key:3},te={key:0},le={key:0,class:"w-24 text-center",value:"Purchase",readonly:""},ae={key:1,class:"w-24 text-center",value:"Discount",readonly:""},oe={key:2,class:"w-24 text-center",value:"Payment",readonly:""},se={key:1},de={key:2},ue={key:3,class:"bg-red-500 text-white hover:bg-red-800"};c.render=function(e,t,h,c,ne,re){return l(),a("div",null,[m,o("div",null,[s(o("input",{class:"text-center","onUpdate:modelValue":t[1]||(t[1]=e=>ne.customerId=e),placeholder:"Customer ID",onKeypress:t[2]||(t[2]=t=>re.isIntegerNumber(e.event))},null,544),[[d,ne.customerId]]),p,s(o("input",{class:"text-center","onUpdate:modelValue":t[3]||(t[3]=e=>ne.fromDate=e),placeholder:"Date from"},null,512),[[d,ne.fromDate]]),D,s(o("input",{class:"text-center","onUpdate:modelValue":t[4]||(t[4]=e=>ne.toDate=e),placeholder:"To Date"},null,512),[[d,ne.toDate]]),o("button",{class:"bg-green-500 text-white hover:bg-green-800 rounded",onClick:t[5]||(t[5]=(...e)=>re.getAllFilteredData&&re.getAllFilteredData(...e))}," Apply Filter "),o("div",g,[o("div",C,[s(o("input",{type:"checkbox",name:"dueColCheckbox","onUpdate:modelValue":t[6]||(t[6]=e=>ne.dueColVis=e)},null,512),[[u,ne.dueColVis]]),y]),b,o("div",V,[s(o("input",{type:"checkbox",name:"rateColCheckbox","onUpdate:modelValue":t[7]||(t[7]=e=>ne.rateColVis=e)},null,512),[[u,ne.rateColVis]]),f]),A,o("div",x,[s(o("input",{type:"checkbox",name:"actionColCheckbox","onUpdate:modelValue":t[8]||(t[8]=e=>ne.actionColVis=e)},null,512),[[u,ne.actionColVis]]),k])])]),_,o("div",null,[o("button",{class:"bg-blue-500 text-white rounded hover:bg-blue-800",onClick:t[9]||(t[9]=(...e)=>re.getAllCustomerData&&re.getAllCustomerData(...e))}," All Customer"),U,o("button",{class:"bg-blue-500 text-white rounded hover:bg-blue-800",onClick:t[10]||(t[10]=(...e)=>re.getTodayData&&re.getTodayData(...e))}," Today Data"),v,o("button",{class:"bg-blue-500 text-white rounded hover:bg-blue-800",onClick:t[11]||(t[11]=(...e)=>re.getAllTimeData&&re.getAllTimeData(...e))}," All Data ")]),F,ne.singleCustomer?(l(),a("hr",w)):n("",!0),ne.singleCustomer?(l(),a("div",I,[T,M,s(o("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>this.customer.name=e),name:"customerName",readonly:""},null,512),[[d,this.customer.name]]),N,O,s(o("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>this.customer.address=e),name:"customerAddress",readonly:""},null,512),[[d,this.customer.address]]),P,E,s(o("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>this.customer.phone=e),name:"customerPhone",readonly:""},null,512),[[d,this.customer.phone]]),S,j,B,R,s(o("input",{type:"text","onUpdate:modelValue":t[15]||(t[15]=e=>ne.totalDueOfCus=e)},null,512),[[d,ne.totalDueOfCus]]),Y,o("button",{onClick:t[16]||(t[16]=t=>e.$router.push({name:"NewEntry",params:{cid:ne.customer.id}})),class:"bg-blue-500 text-white rounded hover:bg-blue-800"}," New Entry ")])):n("",!0),ne.singleCustomer?(l(),a("hr",q)):n("",!0),ne.singleCustomer?(l(),a("br",K)):n("",!0),o("table",$,[o("thead",null,[ne.singleCustomer?n("",!0):(l(),a("th",z,"Customer Name")),G,H,J,L,Q,ne.rateColVis?(l(),a("th",W,"Item Rate")):n("",!0),X,ne.singleCustomer&&ne.dueColVis?(l(),a("th",Z,"Due")):n("",!0),ne.actionColVis?(l(),a("th",ee,"Actions")):n("",!0)]),o("tbody",null,[(l(!0),a(r,null,i(ne.allData,((e,t)=>(l(),a("tr",{key:e.d_id},[ne.singleCustomer?n("",!0):(l(),a("td",te,[s(o("input",{class:"w-60 text-center","onUpdate:modelValue":t=>e.c_name=t,readonly:""},null,8,["onUpdate:modelValue"]),[[d,e.c_name]])])),o("td",null,[s(o("input",{class:"w-24 text-center","onUpdate:modelValue":t=>e.d_date=t,readonly:""},null,8,["onUpdate:modelValue"]),[[d,e.d_date]])]),o("td",null,[0==e.d_type?(l(),a("input",le)):n("",!0),1==e.d_type?(l(),a("input",ae)):n("",!0),2==e.d_type?(l(),a("input",oe)):n("",!0)]),o("td",null,[0==e.d_type?s((l(),a("input",{key:0,class:"w-50 text-center","onUpdate:modelValue":t=>e.i_name=t,readonly:""},null,8,["onUpdate:modelValue"])),[[d,e.i_name]]):n("",!0)]),o("td",null,[0==e.d_type?s((l(),a("input",{key:0,class:"text-right","onUpdate:modelValue":e=>ne.amountMeter[t]=e,readonly:""},null,8,["onUpdate:modelValue"])),[[d,ne.amountMeter[t]]]):n("",!0)]),o("td",null,[0==e.d_type?s((l(),a("input",{key:0,class:"text-right","onUpdate:modelValue":t=>e.d_amount=t,readonly:""},null,8,["onUpdate:modelValue"])),[[d,e.d_amount]]):n("",!0)]),ne.rateColVis?(l(),a("td",se,[0==e.d_type?s((l(),a("input",{key:0,class:"w-20 text-right","onUpdate:modelValue":t=>e.d_rate=t,readonly:""},null,8,["onUpdate:modelValue"])),[[d,e.d_rate]]):n("",!0)])):n("",!0),o("td",null,[s(o("input",{class:[{"text-red-800":!re.isPurchase(e.d_type)},"text-right"],"onUpdate:modelValue":e=>this.prices[t]=e,readonly:""},null,10,["onUpdate:modelValue"]),[[d,this.prices[t]]])]),ne.singleCustomer&&ne.dueColVis?(l(),a("td",de,[s(o("input",{class:"text-right","onUpdate:modelValue":e=>this.dues[t]=e},null,8,["onUpdate:modelValue"]),[[d,this.dues[t]]])])):n("",!0),ne.actionColVis?(l(),a("td",ue,[o("button",{onClick:t=>re.deleteData(e.d_id)},"Delete",8,["onClick"])])):n("",!0)])))),128))])])])};export default c;
